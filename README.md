# flink-demo

```text
flink 版本 1.18.x
```

```text
hadoop
```

```text
flink
```

```text
maxwell：mysql的cdc工具抽取到kafka中，不支持其他数据库
```

```text
在 Apache Flink 中，水位线（Watermark） 是处理事件时间（event time）流式数据的核心概念，通常用于以下场景：
1. 事件时间处理

水位线用于处理基于事件时间的窗口操作。在流式数据处理中，Flink 支持基于处理时间和事件时间的操作。事件时间是指数据产生的时间，而处理时间是指 Flink 实际处理数据的时间。由于网络延迟或其他原因，流数据可能会延迟到达。因此，Flink 需要一种机制来判断数据是否迟到，这时水位线就派上用场。
2. 延迟数据处理

水位线用于跟踪事件时间的进度，帮助 Flink 识别延迟数据。通过定义水位线，Flink 可以知道何时可以关闭窗口或处理迟到的数据。
3. 窗口操作

在事件时间窗口（如滑动窗口、翻滚窗口等）中，水位线用来决定窗口何时结束。例如，如果你定义了一个10秒的时间窗口，Flink 不会在处理时间到了10秒时关闭窗口，而是等待事件时间通过水位线标记达到10秒后再关闭窗口，以确保所有相关数据都被处理。
4. 数据无序

水位线可以帮助处理无序数据流。当数据到达顺序不一致时，Flink 可以利用水位线来确保不会提前关闭窗口，并为无序到达的数据提供一定的缓冲时间。
5. 处理迟到数据（Allowed Lateness）

在某些情况下，数据即使晚于水位线到达，Flink 也可以配置处理这些迟到数据。通过 Allowed Lateness 参数，你可以告诉 Flink 在水位线之后的某个时限内仍然接受数据，但超过这个时限的数据将被视为无效。
小结

水位线是 Flink 在事件时间模式下判断窗口何时关闭和延迟数据何时处理的关键机制，广泛用于事件时间窗口、处理无序数据、延迟处理等场景中。
```
